(()=>{"use strict";var e={6116:(e,t,n)=>{n.r(t)},1250:(e,t,n)=>{n.r(t)},3681:(e,t,n)=>{n.r(t)},2875:(e,t,n)=>{n.r(t)},7162:(e,t,n)=>{n.r(t)},2727:(e,t,n)=>{n.r(t)},8912:(e,t,n)=>{n.r(t)},3155:(e,t,n)=>{n.r(t)},6016:(e,t,n)=>{n.r(t)},9086:(e,t,n)=>{n.r(t)},8503:(e,t,n)=>{n.r(t)},3784:(e,t,n)=>{n.r(t)},8973:(e,t,n)=>{n.r(t)},7797:(e,t,n)=>{n.r(t)},3951:(e,t,n)=>{n.r(t)},607:(e,t,n)=>{n.r(t)},7858:(e,t,n)=>{n.r(t)},7911:(e,t,n)=>{n.r(t)},5373:(e,t,n)=>{n.r(t)},3835:(e,t,n)=>{n.r(t)},188:(e,t,n)=>{n.r(t)},4337:(e,t,n)=>{n.r(t)},3845:(e,t,n)=>{n.r(t)},7275:(e,t,n)=>{n.r(t)},3685:(e,t,n)=>{n.r(t)},667:(e,t,n)=>{n.r(t)},6887:(e,t,n)=>{n.r(t)},9435:(e,t)=>{var n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.StatusCode=t.WordDifficultyGroup=t.BASE_URL=void 0,t.BASE_URL="https://rslang-task.herokuapp.com",(s=t.WordDifficultyGroup||(t.WordDifficultyGroup={})).A1="0",s.A2="1",s.B1="2",s.B2="3",s.C1="4",s.C2="5",s.HW="6",(n=t.StatusCode||(t.StatusCode={}))[n.Success=200]="Success",n[n.Forbidden=403]="Forbidden",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.UnprocessableEntity=422]="UnprocessableEntity"},2085:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.apiSignIn=void 0;const i=n(2198);class r extends i.BaseApi{constructor(){super(...arguments),this.signInUrl="signin"}signIn(e,t){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/${this.signInUrl}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}}t.apiSignIn=new r},2404:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.apiUsersAggregatedWords=t.ApiUsersAggregatedWords=void 0;const i=n(2198);class r extends i.BaseApi{getAllUserAggregatedWords(e,t,n,i,r,o){return s(this,void 0,void 0,(function*(){const a=`${this.baseUrl}/users/${e}/aggregatedWords?\npage=${t}&wordsPerPage=${n}`+(r?`&filter=${r}`:"")+(o?`&group=${o}`:"");return fetch(a,{method:"GET",headers:{Authorization:`Bearer ${i}`}}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}getAUserAggregatedWordById(e,t,n){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/users/${e}/aggregatedWords/${t}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}}t.ApiUsersAggregatedWords=r,t.apiUsersAggregatedWords=new r},5986:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.apiUsersWords=void 0;const i=n(2198);class r extends i.BaseApi{getAllUserWords(e,t){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/users/${e}/words`,{method:"GET",headers:{Authorization:`Bearer ${t}`}}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}getAUserWordById(e,t,n){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/users/${e}/words/${t}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}createAUserWord(e,t,n,i){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/users/${e}/words/${t}`,{method:"POST",headers:{Authorization:`Bearer ${i}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}updateAUserWord(e,t,n,i){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/users/${e}/words/${t}`,{method:"PUT",headers:{Authorization:`Bearer ${i}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}deleteUserWord(e,t,n){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/users/${e}/words/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}}).then((e=>({statusCode:e.status})))}))}}t.apiUsersWords=new r},3493:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.apiUsers=void 0;const i=n(2198);class r extends i.BaseApi{constructor(){super(...arguments),this.usersUrl="users"}createANewUser(e,t,n){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/${this.usersUrl}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:n})}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}getUser(e,t){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/${this.usersUrl}/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}updateAUser(e,t,n,i){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/${this.usersUrl}/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}deleteAUser(e,t){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/${this.usersUrl}/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}).then((e=>({statusCode:e.status})))}))}getNewUserTokens(e,t){return s(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/${this.usersUrl}/${e}/tokens`,{method:"GET",headers:{Authorization:`Bearer ${t}`}}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}))}}t.apiUsers=new r},2365:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.apiWords=void 0;const i=n(2198);class r extends i.BaseApi{constructor(){super(...arguments),this.wordsUrl="words"}getAChunkOfWords(e,t){return fetch(`${this.baseUrl}/${this.wordsUrl}?page=${t}&group=${e}`,{method:"GET"}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}getAWordWithAssetsById(e){return fetch(`${this.baseUrl}/${this.wordsUrl}/${e}`,{method:"GET"}).then((e=>s(this,void 0,void 0,(function*(){return this.changeResponseOnCustom(e)}))))}}t.apiWords=new r},2198:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseApi=void 0;const i=n(9435);t.BaseApi=class{constructor(){this.baseUrl=i.BASE_URL}changeResponseOnCustom(e){return s(this,void 0,void 0,(function*(){return e.status===i.StatusCode.Success?{statusCode:e.status,body:yield e.json()}:{statusCode:e.status,body:void 0}}))}}},4195:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FieldInputElement=void 0,n(6116);const s=n(10);class i extends s.BaseComponent{constructor(e,t,n){super("div",["field-container"]),this.compareRegExp=n;const i=new s.BaseComponent("input",["field__input"]).element;i.setAttribute("type",e),i.setAttribute("placeholder",t),i.setAttribute("spellcheck","false"),i.addEventListener("input",(e=>this.handlerInput(e))),i.addEventListener("blur",(()=>this.handlerBlur())),i.addEventListener("focus",(()=>this.handlerFocus()));const r=new s.BaseComponent("div",["field"]).element;r.append(i),r.addEventListener("click",(()=>i.focus())),this.infoLabel=new s.BaseComponent("div",["info-label"]).element,this.element.append(r,this.infoLabel),this.value=""}validate(){const e=this.compareRegExp.every((([e,t])=>!!this.value.match(e)||(this.drawErrorMessage(t),!1)));return this.checkFieldState(e),e}getValue(){return this.value}drawErrorMessage(e){this.infoLabel.textContent=e}checkFieldState(e){e?(this.element.classList.remove("invalid"),this.element.classList.add("valid"),this.drawErrorMessage("Отлично ;)))")):(this.element.classList.remove("valid"),this.element.classList.add("invalid"))}handlerBlur(){this.validate()}handlerFocus(){this.element.classList.remove("valid"),this.element.classList.remove("invalid"),this.drawErrorMessage("")}handlerInput(e){this.value=e.target.value}}t.FieldInputElement=i},1459:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormAuthorization=void 0;const s=n(5765),i=n(2085),r=n(7359),o=n(9435),a=n(6203),l=n(2803),d=n(8875),c=n(10),h=n(2945);class u extends s.Form{constructor(){super(),this.email=new d.FieldInputElement("email",l.FieldPlaceholder.enterEmail,a.EMAIL_REGEXP),this.validateElementContainer.push(this.email),this.pass=new d.FieldInputElement("password",l.FieldPlaceholder.enterPassword,a.PASSWORD_REGEXP),this.validateElementContainer.push(this.pass),this.htmlButtonSubmit.textContent="Войти",this.element.append(new c.BaseComponent("div",["form__title"],"Уже с нами?").element,new c.BaseComponent("div",["form__todo"],"Войдите в свой аккаунт RSLang!").element,this.email.element,this.pass.element,this.htmlButtonSubmit),this.htmlButtonSubmit.addEventListener("click",(e=>this.buttonHandler(e)))}buttonHandler(e){if(e.preventDefault(),this.isValid){const e=this.email.getValue().toLowerCase(),t=this.pass.getValue();i.apiSignIn.signIn(e,t).then((e=>{if(e.statusCode!==o.StatusCode.Success)this.drawInfoMessage(r.FormErrorMsg.notValidEmailPassword);else if(e.body){const t=e.body;h.SessionSaver.getInstance().startSession(t.userId,t.token,t.refreshToken),document.location=`${document.URL.split("#")[0]}#main`}}))}else this.drawInfoMessage(r.FormErrorMsg.notValidInput)}}t.FormAuthorization=u},5765:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0,n(1250);const s=n(10);class i extends s.BaseComponent{constructor(){super("form",["form"]),this.validateElementContainer=[],this.htmlButtonSubmit=document.createElement("button"),this.htmlButtonSubmit.classList.add("form__button-submit")}get isValid(){return this.validateElementContainer.every((e=>e.validate()))}drawInfoMessage(e){const t=new s.BaseComponent("div",["form-error-message"],e).element;t.addEventListener("click",(()=>t.remove())),this.element.append(t)}}t.Form=i},6723:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormLogin=void 0;const s=n(10),i=n(1459),r=n(1415);n(3681);class o extends s.BaseComponent{constructor(){super("div",["authorization-container"]),this.selectAuthorization()}selectAuthorization(){const e=document.createElement("a");e.classList.add("link-to-next-form"),e.innerText="зарегистрируйся",e.addEventListener("click",(e=>{e.preventDefault(),this.selectRegistration()})),this.element.innerHTML="";const t=new s.BaseComponent("div",["form__subtext"]).element;t.append(new s.BaseComponent("span",[],"Ещё не с нами? Тогда ").element,e),this.element.append((new i.FormAuthorization).element,t)}selectRegistration(){const e=new s.BaseComponent("a",["link-to-next-form"],"Да, войти!").element;e.addEventListener("click",(e=>{e.preventDefault(),this.selectAuthorization()})),this.element.innerHTML="";const t=new s.BaseComponent("div",["form__subtext"]).element;t.append(new s.BaseComponent("span",[],"Уже есть аккаунт? ").element,e),this.element.append((new r.FormRegistration).element,t)}}t.FormLogin=o},1415:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormRegistration=void 0;const s=n(5765),i=n(7359),r=n(2803),o=n(3493),a=n(2085),l=n(9435),d=n(8875),c=n(6203),h=n(10),u=n(2945);class p extends s.Form{constructor(){super(),this.email=new d.FieldInputElement("email",r.FieldPlaceholder.enterEmail,c.EMAIL_REGEXP),this.password=new d.FieldInputElement("password",r.FieldPlaceholder.enterPassword,c.PASSWORD_REGEXP),this.name=new d.FieldInputElement("text",r.FieldPlaceholder.enterName,c.NAME_REGEXP),this.confirmPass=new d.FieldInputElement("password",r.FieldPlaceholder.enterConfirmPassword,c.CONFIRM_PASSWORD_REGEXP),this.confirmPass.element.addEventListener("click",(()=>{this.confirmPass.compareRegExp[1][0]=new RegExp("^"+this.password.getValue()+"$")})),this.confirmPass.element.addEventListener("keyup",(()=>this.confirmPass.validate())),this.validateElementContainer.push(this.email,this.password,this.name,this.confirmPass),this.htmlButtonSubmit.textContent="Зарегистрироваться",this.element.append(new h.BaseComponent("div",["form__title"],"Зарегистрируйся в RSLang").element,new h.BaseComponent("div",["form__todo"],"...и изучай английский вместе с нами").element,this.email.element,this.name.element,this.password.element,this.confirmPass.element,this.htmlButtonSubmit),this.htmlButtonSubmit.addEventListener("click",(e=>this.submitHandler(e)))}submitHandler(e){if(e.preventDefault(),this.isValid){const e=this.name.getValue(),t=this.email.getValue(),n=this.password.getValue();o.apiUsers.createANewUser(e,t,n).then((e=>{switch(e.statusCode){case l.StatusCode.Success:a.apiSignIn.signIn(this.email.getValue(),this.password.getValue()).then((e=>{if(e.statusCode!==l.StatusCode.Success)this.drawInfoMessage(i.FormErrorMsg.notValidEmailPassword);else if(e.body){const t=e.body;u.SessionSaver.getInstance().startSession(t.userId,t.token,t.refreshToken);const n=document.URL.split("#")[0];document.location=`${n}#main`}}));break;case l.StatusCode.ExpectationFailed:this.drawInfoMessage(i.FormErrorMsg.userAlreadyExist);break;case l.StatusCode.UnprocessableEntity:this.drawInfoMessage(i.FormErrorMsg.notValidEmailPassword)}}))}else this.drawInfoMessage(i.FormErrorMsg.notValidInput)}}t.FormRegistration=p},8875:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4195),t)},7359:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.FormErrorMsg=void 0,(n=t.FormErrorMsg||(t.FormErrorMsg={})).notValidEmailPassword="Неверный E-mail или пароль ;(",n.notValidInput="Скорее всего Вы допустили опечатку...",n.userAlreadyExist="Пользователь с таким E-mail`ом уже существует!!!"},6203:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(7949),t),i(n(2803),t),i(n(7359),t)},2803:(e,t)=>{var n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.FieldPlaceholder=t.FieldValidateError=void 0,(s=t.FieldValidateError||(t.FieldValidateError={})).emptyField="Поле не может быть пустым",s.emailNotCorrect="Неверный E-mail",s.fieldCouldntContainNumber="Имя не должно содержать цифр",s.fieldCouldntContainSymbol="Имя не должно содержать спецсимволов",s.fieldNeedNumber="Пароль должен содержать хотябы одно число",s.fieldNeedSymbol="Пароль должен содержать хотябы один спецсимвол из набора !@#$%^&*№;:=+-_",s.fieldNeedSmallLetter="Пароль должен содержать хотябы одну букву в нижнем регистре",s.fieldNeedUpperLetter="Пароль должен содержать хотябы одну букву в верхнем регистре",s.fieldNeedSixOrMoreLength="Пароль состоит не менее чем из 6-ти символов",s.notEqualyPassword="Ещё не совпадает...",(n=t.FieldPlaceholder||(t.FieldPlaceholder={})).enterPassword="Введите пароль",n.enterEmail="Введите E-mail",n.enterName="Имя",n.enterConfirmPassword="Подтвердите пароль"},7949:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIRM_PASSWORD_REGEXP=t.EMAIL_REGEXP=t.PASSWORD_REGEXP=t.NAME_REGEXP=void 0;const s=n(2803);t.NAME_REGEXP=[[new RegExp(".{1,}","g"),s.FieldValidateError.emptyField],[new RegExp("^[^0-9]*$"),s.FieldValidateError.fieldCouldntContainNumber],[new RegExp("^[a-zA-Zа-яА-Я0-9\\s]*$"),s.FieldValidateError.fieldCouldntContainSymbol]],t.PASSWORD_REGEXP=[[new RegExp(".{1,}","g"),s.FieldValidateError.emptyField],[new RegExp("(?=.*[0-9])","g"),s.FieldValidateError.fieldNeedNumber],[new RegExp("(?=.*[!@#$%^&*№;:=+-_])","g"),s.FieldValidateError.fieldNeedSymbol],[new RegExp("(?=.*[a-zа-я])","g"),s.FieldValidateError.fieldNeedSmallLetter],[new RegExp("(?=.*[A-ZА-Я])","g"),s.FieldValidateError.fieldNeedUpperLetter],[new RegExp("[0-9a-zа-яA-ZА-Я!@#$%^&*№;:=+-_]{8,}","g"),s.FieldValidateError.fieldNeedSixOrMoreLength]],t.EMAIL_REGEXP=[[new RegExp(".{1,}","g"),s.FieldValidateError.emptyField],[new RegExp('^(([^<>()[\\]\\.,;:\\s@"]+(\\.[^<>()[\\]\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$'),s.FieldValidateError.emailNotCorrect]],t.CONFIRM_PASSWORD_REGEXP=[[new RegExp(".{1,}","g"),s.FieldValidateError.emptyField],[new RegExp(""),s.FieldValidateError.notEqualyPassword]]},2945:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionSaver=void 0;const i=n(9435),r=n(3493);class o{constructor(){this.isActiveSession=!1;const e=localStorage.getItem("auth");if(e){const t=JSON.parse(e);this.tokenActual=t.token,this.refreshToken=t.refreshToken,this.userIdActual=t.userId,this.isActiveSession=!0,this.updaterTokens=setTimeout((()=>this.checkSession()),6e5),this.testSession()}else this.isActiveSession=!1;window.addEventListener("storage",(e=>{if(e.key||(this.isActiveSession=!1,this.logout()),"auth"===e.key)if(e.newValue){const t=JSON.parse(e.newValue);this.userIdActual=t.userId,this.tokenActual=t.token,this.refreshToken=t.refreshToken}else this.isActiveSession=!1,this.logout()}))}static getInstance(){return o.instance||(o.instance=new o),o.instance}get isActive(){return this.isActiveSession}get token(){return this.tokenActual}get userId(){return this.userIdActual}testSession(){r.apiUsers.getUser(this.userId,this.token).then((e=>{e.statusCode!==i.StatusCode.Success&&this.logout()}))}checkSession(){return s(this,void 0,void 0,(function*(){return r.apiUsers.getNewUserTokens(this.userIdActual,this.refreshToken).then((e=>{if(e.statusCode===i.StatusCode.Success){const t=e.body;if(t)return this.tokenActual=t.token,this.refreshToken=t.refreshToken,this.saveToStorage(),this.isActiveSession=!0,this.updaterTokens=setTimeout((()=>this.checkSession()),6e5),this.isActiveSession}return this.logout(),this.isActiveSession=!1,this.isActiveSession}))}))}logout(){this.isActiveSession?(r.apiUsers.getNewUserTokens(this.userIdActual,this.refreshToken),localStorage.removeItem("auth"),this.tokenActual="",this.userIdActual="",this.refreshToken="",this.isActiveSession=!1):(this.tokenActual="",this.userIdActual="",this.refreshToken=""),clearTimeout(this.updaterTokens)}startSession(e,t,n){this.userIdActual=e,this.tokenActual=t,this.refreshToken=n,this.isActiveSession=!0,this.saveToStorage(),this.updaterTokens=setTimeout((()=>this.checkSession()),6e5)}saveToStorage(){localStorage.setItem("auth",JSON.stringify({userId:this.userIdActual,token:this.tokenActual,refreshToken:this.refreshToken}))}}t.SessionSaver=o},9711:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GameAudioCallActiveScreen=void 0;const i=n(10),r=n(9435),o=n(2365),a=n(2439);n(2875);const l=n(5188),d=n(3925),c=n(4800),h=n(1760);class u extends i.BaseComponent{constructor(e,t){super("div",["game-audiocall__active-screen"]),this.level=e,this.pageWords=t,this.player=new l.AudioPlayer,this.playButton=new d.ButtonBaseElement(["game-audiocall__play"]),this.answerButton=new d.ButtonBaseElement(["game-audiocall__answer-button"],"не знаю"),this.currentAnswerContainer=new i.BaseComponent("div",["game-audiocall__current-answer-container"]),this.wordImg=new h.ImageBaseElement("game-audiocall__current-word","",""),this.resultGame={correct:[],mistake:[]},this.start(),this.player.setControlElement(this.playButton.element),this.answerButton.element.addEventListener("click",(()=>s(this,void 0,void 0,(function*(){this.wordDataIsEmpty()&&"дальше"===this.answerButton.element.textContent?(this.sortResult(),this.element.replaceWith(new c.GameAudiocallResultScreen(this.resultGame).element)):"дальше"===this.answerButton.element.textContent?(this.answerButton.element.textContent="не знаю",this.player.isPlaying=!1,yield this.setWordOnPlayButton(),this.createCurrentAnswerSet(),this.renderAnswerButtons()):(this.wordImg.element.classList.remove("hidden"),this.wordImg.element.classList.add("visible"),this.answerButton.element.textContent="дальше",this.currentAnswerContainerArray.forEach((e=>{e.element.disabled=!0,e.element.textContent===this.currentWord.wordTranslate&&e.element.classList.add("correct-answer")})),this.resultGame.mistake.push(this.currentWord))}))))}wordDataIsEmpty(){return void 0!==this.wordsData&&0===this.wordsData.length}getWordData(){return s(this,void 0,void 0,(function*(){if(this.pageWords){const e=(yield o.apiWords.getAChunkOfWords(this.level,this.pageWords)).body;e&&+this.pageWords>-1&&(this.wordsData=e,this.pageWords=(+this.pageWords-1).toString())}else{const e=(0,a.getRandomNumber)(0,29).toString(),t=(yield o.apiWords.getAChunkOfWords(this.level,e)).body;t&&(this.wordsData=t)}}))}renderAnswerButtons(){this.currentAnswerContainer.element.innerHTML="",this.currentAnswerContainerArray=[],this.currentAnswerSet.forEach(((e,t)=>{const n=new d.ButtonBaseElement([`game-audiocall-current-answer-${t}`,"current-answer-button"],`${e.wordTranslate}`);this.currentAnswerContainerArray.push(n),n.element.addEventListener("click",(()=>{this.answerButton.element.textContent="дальше",this.wordImg.element.classList.remove("hidden"),this.wordImg.element.classList.add("visible"),this.currentAnswerContainerArray.forEach((e=>{e.element.disabled=!0,e.element.textContent===this.currentWord.wordTranslate&&e.element.classList.add("correct-answer")})),e.word!==this.currentWord.word?(n.element.classList.add("incorrect-answer"),this.resultGame.mistake.push(this.currentWord)):(n.element.classList.add("correct-answer"),this.resultGame.correct.push(this.currentWord))})),this.currentAnswerContainer.element.append(n.element)}))}sortResult(){this.resultGame.correct=this.resultGame.correct.sort(((e,t)=>e.word.localeCompare(t.word))),this.resultGame.mistake=this.resultGame.mistake.sort(((e,t)=>e.word.localeCompare(t.word)))}setWordOnPlayButton(){return s(this,void 0,void 0,(function*(){this.wordsData&&!this.player.isPlaying&&(this.currentWord=this.wordsData.splice((0,a.getRandomNumber)(0,this.wordsData.length-1),1)[0],yield this.player.addInPlaylist(`${r.BASE_URL}/${this.currentWord.audio}`),this.wordImg.element.src=`${r.BASE_URL}/${this.currentWord.image}`,this.wordImg.element.alt=this.currentWord.word,this.wordImg.element.classList.add("hidden"))}))}setWordDataFixed(){this.wordsDataFixed=JSON.parse(JSON.stringify(this.wordsData))}createCurrentAnswerSet(){let e=JSON.parse(JSON.stringify(this.wordsDataFixed));e=e.filter((e=>e.word!==this.currentWord.word)),this.wordsData&&(this.currentAnswerSet=[e.splice((0,a.getRandomNumber)(0,e.length-1),1)[0],e.splice((0,a.getRandomNumber)(0,e.length-1),1)[0],e.splice((0,a.getRandomNumber)(0,e.length-1),1)[0],this.currentWord,e.splice((0,a.getRandomNumber)(0,e.length-1),1)[0]].sort((()=>(0,a.getRandomNumber)(-10,10))))}start(){return s(this,void 0,void 0,(function*(){yield this.getWordData(),this.setWordDataFixed(),yield this.setWordOnPlayButton(),this.createCurrentAnswerSet(),this.renderAnswerButtons(),yield this.element.append(this.playButton.element,this.wordImg.element,this.currentAnswerContainer.element,this.answerButton.element)}))}}t.GameAudioCallActiveScreen=u},4800:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameAudiocallResultScreen=void 0;const s=n(10),i=n(3925),r=n(9435),o=n(4851),a=n(5188);n(7162);class l extends s.BaseComponent{constructor(e){super("div",["game-audiocall__result-screen"]),this.title=new s.BaseComponent("div",["game-audiocall__result-screen__title"],"Ваша статистика ответов:"),this.main=new s.BaseComponent("div",["game-audiocall__result-screen__main"]),this.textbookButton=new i.ButtonBaseElement(["game-audiocall__result-screen__textbook"],"Перейти в учебник"),this.oneMoreGameButton=new i.ButtonBaseElement(["game-audiocall__result-screen__one-more-game"],"Сыграть ещё одну игру"),this.correctAnswerContainer=new s.BaseComponent("div",["game-audiocall__result-screen__correct-answer"],"Правильные ответы:"),this.incorrectAnswerContainer=new s.BaseComponent("div",["game-audiocall__result-screen__incorrect-answer"],"Неправильные ответы:"),this.correctAnswerContainer.element.textContent=`Правильные ответы (${e.correct.length?e.correct.length:""}):`,this.incorrectAnswerContainer.element.textContent=`Неправильные ответы (${e.mistake.length?e.mistake.length:""}):`,this.main.element.append(this.correctAnswerContainer.element,this.incorrectAnswerContainer.element),this.addWordToContainer(e.correct,this.correctAnswerContainer.element),this.addWordToContainer(e.mistake,this.incorrectAnswerContainer.element);const t=new s.BaseComponent("div",["game-audiocall__result-screen-button-container"]);t.element.append(this.textbookButton.element,this.oneMoreGameButton.element),this.element.append(this.title.element,this.main.element,t.element),this.oneMoreGameButton.element.addEventListener("click",(()=>{"#audiocall-game"===window.location.hash?this.element.replaceWith(new o.GameAudiocallStartScreen(null).element):window.location.hash="#audiocall-game"})),this.textbookButton.element.addEventListener("click",(()=>{window.location.hash="#textbook"}))}addWordToContainer(e,t){e.forEach((e=>{const n=new a.AudioPlayer;n.addInPlaylist(`${r.BASE_URL}/${e.audio}`);const o=new i.ButtonBaseElement(["game-audiocall__word-audio"]).element;n.setControlElement(o);const l=new s.BaseComponent("div",["game-audiocall__word-container"],`${e.word} - ${e.wordTranslate}`).element;l.prepend(o),t.append(l)}))}}t.GameAudiocallResultScreen=l},5526:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameAudiocallRoot=void 0;const s=n(10),i=n(4851);class r extends s.BaseComponent{constructor(e=null,t){super("div",["game-audiocall__wrapper"]),this.pageWords=t,this.element.append(new i.GameAudiocallStartScreen(e,t).element)}}t.GameAudiocallRoot=r},4851:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameAudiocallStartScreen=void 0;const s=n(10);n(2727);const i=n(2439),r=n(9435),o=n(3925),a=n(9711);class l extends s.BaseComponent{constructor(e,t){super("div",["game-audiocall__start-screen"]),this.level=e,this.pageWords=t,window.scrollTo(0,0),this.startGameButton=new o.ButtonBaseElement(["game-audiocall__block-2-selected-button"],"Начать"),this.element.append(this.createBlock1().element),this.element.append(this.createBlock2(e).element),e&&(this.selectedLevel=e),this.startGameButton.element.addEventListener("click",(()=>{this.element.replaceWith(new a.GameAudioCallActiveScreen(this.selectedLevel,this.pageWords).element)}))}createBlock1(){const e=new s.BaseComponent("div",["game-audiocall__block-1"]),t=new s.BaseComponent("p",["game-audiocall__title"],i.GAME_AUDIOCALL_TITLE),n=new s.BaseComponent("p",["game-audiocall__description"],i.GAME_AUDIOCALL_DESCRIPTION);return e.element.append(t.element,n.element),e}createBlock2(e){const t=new s.BaseComponent("div",["game-audiocall__block-2"]);if(e){const e=new s.BaseComponent("p",["game-audiocall__level_selected"],i.GAME_AUDIOCALL_LEVEL_SELECTED);t.element.append(e.element),t.element.append(this.startGameButton.element)}else{const e=new s.BaseComponent("p",["game-audiocall__block-2-title"],"Выбери уровень:"),n=new s.BaseComponent("div",["game-audiocall__block-2-level-buttons"]);this.startGameButton.element.disabled=!0;const i=Object.keys(r.WordDifficultyGroup).sort(((e,t)=>e.localeCompare(t))),a=Object.values(r.WordDifficultyGroup),l=[];for(let e=0;e<6;e++)l.push(new o.ButtonBaseElement([`game-audiocall__button-${i[e]}`,"audiocall-level-button"],i[e]));l.forEach((e=>{e.element.addEventListener("click",(()=>{l.forEach((e=>{e.element.classList.remove("active")})),e.element.classList.add("active"),this.startGameButton.element.disabled=!1;const t=l.findIndex((t=>t===e));this.selectedLevel=a[t]})),n.element.append(e.element)})),t.element.append(e.element),t.element.append(n.element),t.element.append(this.startGameButton.element)}return t}}t.GameAudiocallStartScreen=l},2439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomNumber=t.GAME_AUDIOCALL_LEVEL_SELECTED=t.GAME_AUDIOCALL_DESCRIPTION=t.GAME_AUDIOCALL_TITLE=void 0,t.GAME_AUDIOCALL_TITLE="Аудиовызов",t.GAME_AUDIOCALL_DESCRIPTION="Тренировка Аудиовызов улучшает твое восприятие речи на слух.",t.GAME_AUDIOCALL_LEVEL_SELECTED="Игра начнется с текущими словами из словаря. Удачи!",t.getRandomNumber=function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},3723:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GameSprintActiveScreen=void 0;const i=n(10),r=n(2365),o=n(1283),a=n(3925);n(8912);const l=n(1567),d=n(162),c=n(3326);class h extends i.BaseComponent{constructor(e,t){super("div",["game-sprint__active-screen"]),this.level=e,this.pageWords=t,this.points=new l.SprintPoints,this.gameIsActive=!0,this.wordContainer=new d.SprintWordContainer,this.correctButton=new a.ButtonBaseElement(["game-sprint__active-screen-correct-button"],"верно"),this.incorrectButton=new a.ButtonBaseElement(["game-sprint__active-screen-incorrect-button"],"не верно"),this.timer=new i.BaseComponent("div",["game-sprint__active-screen-sprint-timer"]),this.rounds=0,this.multiplierContainer=new i.BaseComponent("div",["game-sprint__active-screen-sprint-multiplier"],"Множитель очков: 1, +10"),this.streakContainer=new i.BaseComponent("div",["game-sprint__active-screen-sprint-streak"],"Верных ответов подряд до увеличения множителя очков: 3"),this.streakCount=0,this.roundsWin=0,this.startTimeAnimation=null,this.pointsMultiplier=1,this.resultGame={correct:[],mistake:[]},this.timerAnim=e=>{this.startTimeAnimation||(this.startTimeAnimation=e);const t=30-(e-this.startTimeAnimation)/1e3;this.timer.element.textContent=`${t.toFixed(0)} с`,t>0?window.requestAnimationFrame(this.timerAnim):(this.gameIsActive=!1,this.sortResult(),this.element.replaceWith(new c.GameSprintResultScreen(this.resultGame).element))},this.start(),this.correctButton.element.addEventListener("click",(()=>s(this,void 0,void 0,(function*(){this.gameLogicOnAnswer(!0)})))),this.incorrectButton.element.addEventListener("click",(()=>s(this,void 0,void 0,(function*(){this.gameLogicOnAnswer(!1)})))),document.addEventListener("keydown",(e=>{this.keyboardKeyPressListener(e)}))}gameLogicOnAnswer(e){return s(this,void 0,void 0,(function*(){this.gameIsActive&&(this.rounds+=1,this.wordContainer.isCorrectAnswer()===e?(this.resultGame.correct.push(this.wordContainer.wordPair[0]),this.counterIncrease(),this.streakCount+=1,this.roundsWin+=1,this.calculatePointsMultiplier()):(this.resultGame.mistake.push(this.wordContainer.wordPair[0]),this.streakCount=0,this.calculatePointsMultiplier()),this.wordDataIsEmpty()&&(this.pageWords&&-1==+this.pageWords?(this.gameIsActive=!1,this.sortResult(),this.element.replaceWith(new c.GameSprintResultScreen(this.resultGame).element)):yield this.getWordData()),this.renderStreakContainer(),this.renderMultiplierContainer(),yield this.wordContainer.setWordPair(this.wordsData),yield this.wordContainer.renderWordPair())}))}wordDataIsEmpty(){return void 0!==this.wordsData&&0===this.wordsData.length}keyboardKeyPressListener(e){switch(e.keyCode){case 37:this.gameLogicOnAnswer(!0);break;case 39:this.gameLogicOnAnswer(!1)}}getWordData(){return s(this,void 0,void 0,(function*(){if(this.pageWords){const e=(yield r.apiWords.getAChunkOfWords(this.level,this.pageWords)).body;e&&+this.pageWords>-1&&(this.wordsData=e,this.pageWords=(+this.pageWords-1).toString())}else{const e=(0,o.getRandomNumber)(0,29).toString(),t=(yield r.apiWords.getAChunkOfWords(this.level,e)).body;t&&(this.wordsData=t)}}))}renderMultiplierContainer(){const e=this.pointsMultiplier;this.multiplierContainer.element.textContent=`Множитель очков: ${e}, +${10*e}`}renderStreakContainer(){const e=this.streakCount%3;this.streakContainer.element.textContent="Верных ответов подряд до увеличения множителя очков: "+(3-e)}calculatePointsMultiplier(){this.pointsMultiplier=Math.floor(this.streakCount/3)?Math.floor(this.streakCount/3)+1:1}counterIncrease(){this.points.increasePointsBy(10*this.pointsMultiplier),this.points.renderPoints()}sortResult(){this.resultGame.correct=this.resultGame.correct.sort(((e,t)=>e.word.localeCompare(t.word))),this.resultGame.mistake=this.resultGame.mistake.sort(((e,t)=>e.word.localeCompare(t.word)))}start(){return s(this,void 0,void 0,(function*(){yield this.getWordData();const e=new i.BaseComponent("div",["game-sprint__active-screen-button-container"]);e.element.append(this.correctButton.element,this.incorrectButton.element),this.element.append(this.points.element,this.multiplierContainer.element,this.streakContainer.element,this.wordContainer.element,e.element,this.timer.element),yield this.wordContainer.setWordPair(this.wordsData),yield this.wordContainer.renderWordPair(),window.requestAnimationFrame(this.timerAnim)}))}}t.GameSprintActiveScreen=h},3326:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameSprintResultScreen=void 0;const s=n(10),i=n(3925),r=n(9435),o=n(178),a=n(5188);n(3155);class l extends s.BaseComponent{constructor(e){super("div",["game-sprint__result-screen"]),this.title=new s.BaseComponent("div",["result-screen__title"],"Ваша статистика ответов:"),this.main=new s.BaseComponent("div",["result-screen__main"]),this.textbookButton=new i.ButtonBaseElement(["result-screen__textbook"],"Перейти в учебник"),this.oneMoreGameButton=new i.ButtonBaseElement(["result-screen__one-more-game"],"Сыграть ещё одну игру"),this.correctAnswerContainer=new s.BaseComponent("div",["result-screen__correct-answer"],"Правильные ответы:"),this.incorrectAnswerContainer=new s.BaseComponent("div",["result-screen__incorrect-answer"],"Неправильные ответы:"),this.correctAnswerContainer.element.textContent=`Правильные ответы (${e.correct.length?e.correct.length:""}):`,this.incorrectAnswerContainer.element.textContent=`Неправильные ответы (${e.mistake.length?e.mistake.length:""}):`,this.main.element.append(this.correctAnswerContainer.element,this.incorrectAnswerContainer.element),this.addWordToContainer(e.correct,this.correctAnswerContainer.element),this.addWordToContainer(e.mistake,this.incorrectAnswerContainer.element);const t=new s.BaseComponent("div",["game-sprint__result-screen-button-container"]);t.element.append(this.textbookButton.element,this.oneMoreGameButton.element),this.element.append(this.title.element,this.main.element,t.element),this.oneMoreGameButton.element.addEventListener("click",(()=>{"#sprint-game"===window.location.hash?this.element.replaceWith(new o.GameSprintStartScreen(null).element):window.location.hash="#sprint-game"})),this.textbookButton.element.addEventListener("click",(()=>{window.location.hash="#textbook"}))}addWordToContainer(e,t){e.forEach((e=>{const n=new a.AudioPlayer;n.addInPlaylist(`${r.BASE_URL}/${e.audio}`);const o=new i.ButtonBaseElement(["word-audio"]).element;n.setControlElement(o);const l=new s.BaseComponent("div",["word-container"],`${e.word} - ${e.wordTranslate}`).element;l.prepend(o),t.append(l)}))}}t.GameSprintResultScreen=l},1394:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameSprintRoot=void 0;const s=n(10),i=n(178);class r extends s.BaseComponent{constructor(e=null,t){super("div",["game-sprint-wrapper"]),this.pageWords=t,this.element.append(new i.GameSprintStartScreen(e,t).element)}}t.GameSprintRoot=r},178:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameSprintStartScreen=void 0;const s=n(10);n(6016);const i=n(1283),r=n(9435),o=n(3925),a=n(3723);class l extends s.BaseComponent{constructor(e,t){super("div",["game-sprint__start-screen"]),this.level=e,this.pageWords=t,window.scrollTo(0,0),this.startGameButton=new o.ButtonBaseElement(["game-sprint__block-2-selected-button"],"Начать"),this.element.append(this.createBlock1().element),this.element.append(this.createBlock2(e).element),e&&(this.selectedLevel=e),this.startGameButton.element.addEventListener("click",(()=>{this.element.replaceWith(new a.GameSprintActiveScreen(this.selectedLevel,this.pageWords).element)}))}createBlock1(){const e=new s.BaseComponent("div",["game-sprint__block-1"]),t=new s.BaseComponent("p",["game-sprint__title"],i.GAME_SPRINT_TITLE),n=new s.BaseComponent("p",["game-sprint__description"],i.GAME_SPRINT_DESCRIPTION);return e.element.append(t.element,n.element),e}createBlock2(e){const t=new s.BaseComponent("div",["game-sprint__block-2"]);if(e){const e=new s.BaseComponent("p",["game-sprint__level_selected"],i.GAME_SPRINT_LEVEL_SELECTED);t.element.append(e.element),t.element.append(this.startGameButton.element)}else{const e=new s.BaseComponent("p",["game-sprint__block-2-title"],"Выбери уровень:"),n=new s.BaseComponent("div",["game-sprint__block-2-level-buttons"]);this.startGameButton.element.disabled=!0;const i=Object.keys(r.WordDifficultyGroup).sort(((e,t)=>e.localeCompare(t))),a=Object.values(r.WordDifficultyGroup),l=[];for(let e=0;e<6;e++)l.push(new o.ButtonBaseElement([`game-sprint__button-${i[e]}`,"sprint-level-button"],i[e]));l.forEach((e=>{e.element.addEventListener("click",(()=>{l.forEach((e=>{e.element.classList.remove("active")})),e.element.classList.add("active"),this.startGameButton.element.disabled=!1;const t=l.findIndex((t=>t===e));this.selectedLevel=a[t]})),n.element.append(e.element)})),t.element.append(e.element),t.element.append(n.element),t.element.append(this.startGameButton.element)}return t}}t.GameSprintStartScreen=l},1567:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SprintPoints=void 0;const s=n(10);class i extends s.BaseComponent{constructor(){super("div",["audiocall-points"],"Очки: 0"),this.points=0}get value(){return this.points}set value(e){this.points=e}increasePointsBy(e){this.points+=e}renderPoints(){this.element.textContent=`Очки: ${this.points}`}}t.SprintPoints=i},162:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SprintWordContainer=void 0;const i=n(10),r=n(1283);class o extends i.BaseComponent{constructor(){super("div",["game-sprint__active-screen-word-container"])}setWordPair(e){if(0!==e.length){const t=(0,r.getRandomNumber)(0,e.length-1),n=e.splice(t,1)[0],s=e.length?[n.wordTranslate,e[(0,r.getRandomNumber)(0,e.length-1)].wordTranslate][(0,r.getRandomNumber)(0,1)]:n.wordTranslate;this.wordPair=[n,s]}}renderWordPair(){return s(this,void 0,void 0,(function*(){this.element.innerHTML="",this.element.innerHTML=`${this.wordPair[0].word} - ${this.wordPair[1]}`}))}isCorrectAnswer(){return this.wordPair[0].wordTranslate===this.wordPair[1]}}t.SprintWordContainer=o},1283:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomNumber=t.GAME_SPRINT_LEVEL_SELECTED=t.GAME_SPRINT_DESCRIPTION=t.GAME_SPRINT_TITLE=void 0,t.GAME_SPRINT_TITLE="Спринт",t.GAME_SPRINT_DESCRIPTION="Спринт - тренировка на скорость. Попробуй угадать как можно больше слов за 30 секунд.",t.GAME_SPRINT_LEVEL_SELECTED="Игра начнется с текущими словами из словаря. Удачи!",t.getRandomNumber=function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},6980:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GamesPage=void 0;const s=n(10),i=n(1760);n(9086);class r extends s.BaseComponent{constructor(){super("div",["games-page"]),this.gamesPageTitle=new s.BaseComponent("div",["games-page-title"],"Игры"),this.linkToSprintGame=new s.BaseComponent("a",["link-to-sprint"]),this.linkToSprintGame.element.setAttribute("href","#sprint-game"),this.linkToAudioCallGame=new s.BaseComponent("a",["link-to-audiocall"]),this.linkToAudioCallGame.element.setAttribute("href","#audiocall-game"),this.sprintGameName=new s.BaseComponent("p",["sprint-name"],"Спринт"),this.audioCallGameName=new s.BaseComponent("p",["audiocall-name"],"Аудиовызов"),this.sprintImage=new i.ImageBaseElement("sprint","./assets/sprint.jpg","sprint"),this.audioCallImage=new i.ImageBaseElement("audiocall","./assets/audiocall.jpg","audiocall"),this.imagesWrapper=new s.BaseComponent("div",["images-wrapper"]),this.element.appendChild(this.gamesPageTitle.element),this.linkToSprintGame.element.appendChild(this.sprintGameName.element),this.linkToSprintGame.element.appendChild(this.sprintImage.element),this.linkToAudioCallGame.element.appendChild(this.audioCallGameName.element),this.linkToAudioCallGame.element.appendChild(this.audioCallImage.element),this.imagesWrapper.element.appendChild(this.linkToSprintGame.element),this.imagesWrapper.element.appendChild(this.linkToAudioCallGame.element),this.element.appendChild(this.imagesWrapper.element)}}t.GamesPage=r},1568:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=n(7081),i=n(6723),r=n(4023),o=n(10),a=n(8680),l=n(8483),d=n(6980),c=n(1394),h=n(9435),u=n(5526);t.App=class{constructor(){this.header=new r.HeaderWrapper,this.main=new o.BaseComponent("main",["main-wrapper"]),this.footer=new a.Footer}renderNewPage(e){let t;if(e.includes("sprint-game")||e.includes("audiocall-game")?this.footer.element.style.display="none":this.footer.element.style.display="flex","main"===e)t=new s.StartPage;else if("login"===e)t=new i.FormLogin;else if("textbook"===e)t=new l.Textbook;else if("games"===e)t=new d.GamesPage;else if(e.includes("sprint-game")){const[n,s]=e.split("/").slice(1);if(n){const e=Object.values(h.WordDifficultyGroup).sort()[+n];t=new c.GameSprintRoot(e,s)}else t=new c.GameSprintRoot}else if(e.includes("audiocall-game")){const[n,s]=e.split("/").slice(1);if(n){const e=Object.values(h.WordDifficultyGroup).sort()[+n];t=new u.GameAudiocallRoot(e,s)}else t=new u.GameAudiocallRoot}else t=new s.StartPage;t&&(this.main.element.innerHTML="",this.main.element.append(t.element),this.header.element.innerHTML="",this.header.element.append(...(new r.HeaderWrapper).element.childNodes))}enableRouteChange(){window.addEventListener("hashchange",(()=>{const e=window.location.hash.slice(1);this.renderNewPage(e)}))}run(){document.body.append(this.header.element),document.body.append(this.main.element),document.body.append(this.footer.element);const e=window.location.hash.slice(1);this.renderNewPage(e),this.enableRouteChange()}}},5188:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AudioPlayer=void 0,t.AudioPlayer=class{constructor(){this.player=new Audio,this.isPlaying=!1,this.controlElement=void 0,this.playlist=[]}addInPlaylist(...e){this.isPlaying&&this.stopPlayer(),this.cleanPlayList(),this.playlist=[...e]}setControlElement(e){this.controlElement=e,this.controlElement.addEventListener("click",(()=>{this.controlElementClick()})),this.updateControlElement()}cleanPlayList(){this.playlist.length=0}getPlayIcon(e){return e?'<?xml version="1.0" ?><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="darkgreen"><title/><g data-name="Layer 2" id="Layer_2"><path d="M19.45,4.11a1,1,0,0,0-1,.09L10.67,10H3a1,1,0,0,0-1,1V21a1,1,0,0,0,1,1h7.67l7.73,5.8A1,1,0,0,0,20,27V5A1,1,0,0,0,19.45,4.11Z"/><path d="M23,12a1,1,0,0,0-1,1v6a1,1,0,0,0,2,0V13A1,1,0,0,0,23,12Z"/><path d="M26,10a1,1,0,0,0-1,1V21a1,1,0,0,0,2,0V11A1,1,0,0,0,26,10Z"/><path d="M29,8a1,1,0,0,0-1,1V23a1,1,0,0,0,2,0V9A1,1,0,0,0,29,8Z"/></g></svg>':'<?xml version="1.0" ?><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" fill="#2907f5a1"><title/><g data-name="Layer 2" id="Layer_2"><path d="M19.45,4.11a1,1,0,0,0-1,.09L10.67,10H3a1,1,0,0,0-1,1V21a1,1,0,0,0,1,1h7.67l7.73,5.8A1,1,0,0,0,20,27V5A1,1,0,0,0,19.45,4.11Z"/></g></svg>'}playNext(){if(this.currentPlaylist.length){const e=()=>{this.player.play(),this.player.removeEventListener("canplaythrough",e),this.isPlaying=!0,this.updateControlElement()},t=()=>{this.player.removeEventListener("ended",t),this.isPlaying=!1,this.playNext(),this.updateControlElement()};this.player.src=this.currentPlaylist.shift(),this.player.addEventListener("canplaythrough",e),this.player.addEventListener("ended",t)}else this.isPlaying=!1,this.updateControlElement()}stopPlayer(){this.player.pause(),this.player.src="",this.player=new Audio,this.isPlaying=!1,this.updateControlElement()}updateControlElement(){this.controlElement&&(this.controlElement.innerHTML=this.getPlayIcon(this.isPlaying))}controlElementClick(){this.isPlaying?this.stopPlayer():(this.currentPlaylist=[...this.playlist],this.playNext())}}},10:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e,t,n){this.element=document.createElement(e),t&&t.forEach((e=>this.element.classList.add(e))),n&&(this.element.innerText=n)}}},3925:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonBaseElement=void 0;const s=n(10);class i extends s.BaseComponent{constructor(e,t){super("button",e,t)}}t.ButtonBaseElement=i},1760:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImageBaseElement=void 0;const s=n(10);class i extends s.BaseComponent{constructor(e,t,n){super("img",[`${e}-image`]),this.element.src=t,this.element.alt=n}}t.ImageBaseElement=i},9442:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FeaturesContainerBase=void 0;const s=n(10),i=n(1760);class r extends s.BaseComponent{constructor(e,t,n,r){super("div",[`app-feature-${e}`]),this.imageContainer=new i.ImageBaseElement(`app-feature-${e}`,n,"app-feature"),this.title=new s.BaseComponent("div",[`app-feature-title-${e}`],t),this.subtitle=new s.BaseComponent("div",[`app-feature-subtitle-${e}`],r),this.textContainer=new s.BaseComponent("div",["text-container"]),this.element.appendChild(this.imageContainer.element),this.textContainer.element.appendChild(this.title.element),this.textContainer.element.appendChild(this.subtitle.element),this.element.appendChild(this.textContainer.element)}}t.FeaturesContainerBase=r},3891:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DevelopersContainerBase=void 0;const s=n(10),i=n(1760);class r extends s.BaseComponent{constructor(e,t,n,r,o){super("div",["developer","about-dev",e]),this.imageContainer=new i.ImageBaseElement(`developer-${e}`,n,`developer-${e}`),this.textContainer=new s.BaseComponent("div",["developer-text-container"]),this.developerTitle=new s.BaseComponent("div",["developer-title",e],t),this.developerSubtitle=new s.BaseComponent("div",["developer-subtitle",e],r),this.githubLink=new s.BaseComponent("a",["dev-github-link"]),this.githubLink.element.setAttribute("href",o),this.element.appendChild(this.imageContainer.element),this.githubLink.element.appendChild(this.developerTitle.element),this.textContainer.element.appendChild(this.githubLink.element),this.textContainer.element.appendChild(this.developerSubtitle.element),this.element.appendChild(this.textContainer.element)}}t.DevelopersContainerBase=r},6720:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DevelopersWrapper=void 0;const s=n(10),i=n(3891);n(3784);class r extends s.BaseComponent{constructor(){super("section",["about-developers-wrapper"]),this.developerContainer=new s.BaseComponent("div",["developers-container"]),this.aboutDeveloperTitle=new s.BaseComponent("div",["about-developer-title"],"О разработчиках"),this.developerAnton=new i.DevelopersContainerBase("anton","Anton | Junior front-end developer","./assets/anton.jpg","Спустя 5 лет после универа понял, что всё-таки программирование это мое. Запросил все данные от сервера, которые только можно запросить, а так же написал игры спринт и аудиовызов","https://github.com/mldx"),this.developerVladimir=new i.DevelopersContainerBase("vladimir","Vladimir | Junior front-end developer","./assets/vladimir.jpg","Три недели получал удовольствие от командной работы и это было даже бесплатно. А ещё формы авторизации, учебник... и, может, ещё что - нибудь...","https://github.com/dyexplode"),this.developerIryna=new i.DevelopersContainerBase("iryna","Iryna | Team lead | Junior front-end dev","./assets/iryna.jpg","Стартовая страница, общий дизайн приложения и роутинг, что еще нужно для счастья?","https://github.com/grinch-ira"),this.element.appendChild(this.aboutDeveloperTitle.element),this.element.appendChild(this.developerContainer.element),this.developerContainer.element.appendChild(this.developerAnton.element),this.developerContainer.element.appendChild(this.developerVladimir.element),this.developerContainer.element.appendChild(this.developerIryna.element)}}t.DevelopersWrapper=r},5847:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FeaturesWrapper=void 0;const s=n(10),i=n(9442);n(8973);class r extends s.BaseComponent{constructor(){super("section",["features-wrapper"]),this.applicationFeaturesTitle=new s.BaseComponent("div",["application-features-title"],"Ваш следующий успех - не за горами"),this.applicationFeaturesSubtitle=new s.BaseComponent("div",["application-features-subtitle"],"чтобы стать к нему чуть-чуть ближе, ознакомтесь с возможностями приложения"),this.featuresContainer=new s.BaseComponent("div",["app-feature-container"]),this.textbookFeatures=new i.FeaturesContainerBase("textbook","Учебник","./assets/textbook.jpg","Более 3500 слов для изучения, разбитых на разделы по уровню твоей подготовки"),this.textbookFeatures.element.addEventListener("click",(()=>{document.location=`${document.URL.split("#")[0]}#textbook`})),this.dictionaryFeatures=new i.FeaturesContainerBase("dictionary","Словарь","./assets/dictionary.jpg","Создай свой персональный словарь для изучения слов"),this.dictionaryFeatures.element.addEventListener("click",(()=>{document.location=`${document.URL.split("#")[0]}#textbook`})),this.gamesFeatures=new i.FeaturesContainerBase("games","Игры","./assets/game.jpg","Увлекательные игры на развитие запоминания слов, восприятия на слух и письма"),this.gamesFeatures.element.addEventListener("click",(()=>{document.location=`${document.URL.split("#")[0]}#games`})),this.statisticFeatures=new i.FeaturesContainerBase("statistic","Статистика","./assets/statisctic.jpg","Отслеживай свой прогресс в индивидуальной статистике!"),this.element.appendChild(this.applicationFeaturesTitle.element),this.element.appendChild(this.applicationFeaturesSubtitle.element),this.element.appendChild(this.featuresContainer.element),this.featuresContainer.element.appendChild(this.textbookFeatures.element),this.featuresContainer.element.appendChild(this.dictionaryFeatures.element),this.featuresContainer.element.appendChild(this.gamesFeatures.element),this.featuresContainer.element.appendChild(this.statisticFeatures.element)}}t.FeaturesWrapper=r},8680:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0;const s=n(10);n(7797);class i extends s.BaseComponent{constructor(){super("footer",["footer-wrapper"]);const e=document.createElement("div");e.classList.add("footer-content");const t=document.createElement("div");t.classList.add("footer__author-link-container");const n=document.createElement("h2");n.classList.add("footer__author-header"),n.textContent="Разработчики",t.append(n,this.getGitAuthor("Ирина","https://github.com/grinch-ira"),this.getGitAuthor("Антон","https://github.com/mldx"),this.getGitAuthor("Владимир","https://github.com/dyexplode"));const i=document.createElement("a");i.setAttribute("href","https://rs.school/js/");const r=document.createElement("img");r.classList.add("footer__course-image"),r.setAttribute("src","./assets/rs-school.svg"),i.append(r),e.append(t,i);const o=new s.BaseComponent("div",["group-number-year"],"Team 127©, 2022").element;this.element.append(e,o)}getGitAuthor(e,t){const n=document.createElement("a");n.classList.add("footer__author-link"),n.setAttribute("href",t);const s=document.createElement("img");s.classList.add("footer__author-git"),s.setAttribute("src","./assets/github.svg"),s.setAttribute("alt","GitHub");const i=document.createElement("span");return i.classList.add("footer__name"),i.textContent=e,n.append(s,i),n}}t.Footer=i},4140:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderLinkList=void 0;const s=n(2945),i=n(10);n(3951);class r extends i.BaseComponent{constructor(){super("nav",["header-link-list"]),this.headerLinkMain=new i.BaseComponent("a",["header-main"],"Главная"),this.headerLinkMain.element.setAttribute("href","#main"),this.headerLinkTextBook=new i.BaseComponent("a",["header-textbook"],"Учебник"),this.headerLinkTextBook.element.setAttribute("href","#textbook"),this.headerLinkGame=new i.BaseComponent("a",["header-game"],"Игры"),this.headerLinkGame.element.setAttribute("href","#games"),this.headerLinkStatistics=new i.BaseComponent("a",["header-statistics"],"Статистика"),this.headerLinkStatistics.element.setAttribute("href","#"),this.headerLinkLogin=new i.BaseComponent("button",["login","header-link-login"]),s.SessionSaver.getInstance().isActive?(this.headerLinkLogin.element.textContent="Выход",this.headerLinkLogin.element.addEventListener("click",(()=>{s.SessionSaver.getInstance().logout();const e=document.URL.includes("#")?document.URL.split("#")[0]:`${document.URL.split("#")[0]}#main`;document.location=e}))):(this.headerLinkLogin.element.textContent="Вход",this.headerLinkLogin.element.addEventListener("click",(()=>{document.location=`${document.URL.split("#")[0]}#login`}))),this.headerLinkLogin.element.setAttribute("href","#login"),this.element.appendChild(this.headerLinkMain.element),this.element.appendChild(this.headerLinkTextBook.element),this.element.appendChild(this.headerLinkGame.element),this.element.appendChild(this.headerLinkStatistics.element),this.element.appendChild(this.headerLinkLogin.element)}}t.HeaderLinkList=r},4023:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderWrapper=void 0;const s=n(10),i=n(4140);n(607);class r extends s.BaseComponent{constructor(){super("header",["header-wrapper"]),this.headerContainer=new s.BaseComponent("div",["header-container"]),this.headerLogo=new s.BaseComponent("a",["header-logo"],"RSLang"),this.headerLogo.element.setAttribute("href","#main"),this.headerLinkList=new i.HeaderLinkList,this.headerContainer.element.appendChild(this.headerLogo.element),this.headerContainer.element.appendChild(this.headerLinkList.element),this.element.appendChild(this.headerContainer.element)}}t.HeaderWrapper=r},9950:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MainWrapperImage=void 0;const s=n(2945),i=n(10),r=n(1760);n(7858);class o extends i.BaseComponent{constructor(){super("section",["image-content-wrapper"]),this.wrapperContentImage=new r.ImageBaseElement("wrapper-main-content","./assets/main.jpg","Wrapper"),this.wrapperContentTitle=new i.BaseComponent("p",["wrapper-image-content-title"],"Достигайте лучших возможных результатов"),this.wrapperContentLogIn=new i.BaseComponent("a",["header-link-wrapper-login"],"Вход"),this.wrapperContentLogIn.element.setAttribute("href","#login"),this.wrapperContentContainer=new i.BaseComponent("div",["image-content-container"]),this.element.appendChild(this.wrapperContentImage.element),this.wrapperContentContainer.element.appendChild(this.wrapperContentTitle.element),s.SessionSaver.getInstance().isActive||this.wrapperContentContainer.element.appendChild(this.wrapperContentLogIn.element),this.element.appendChild(this.wrapperContentContainer.element)}}t.MainWrapperImage=o},7081:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StartPage=void 0;const s=n(9950),i=n(5847),r=n(6720);n(7911);const o=n(10);class a extends o.BaseComponent{constructor(){super("div",["start-page"]),this.mainWrapperImage=new s.MainWrapperImage,this.featuresWrapper=new i.FeaturesWrapper,this.developerWrapper=new r.DevelopersWrapper,this.element.append(this.mainWrapperImage.element),this.element.append(this.featuresWrapper.element),this.element.append(this.developerWrapper.element)}}t.StartPage=a},9776:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LevelButton=void 0;const s=n(9435),i=n(10),r=n(7024);n(3835);class o extends i.BaseComponent{constructor(e){const t=Object.keys(s.WordDifficultyGroup).sort();super("div",["level-button","level-"+ +e]),this.element.append(new i.BaseComponent("div",["level-button__label"],r.TEXTBOOK_LEVEL_DESCRIPTION[+e]).element,new i.BaseComponent("div",["level-button__value"],t[+e]).element),this.level=e,this.element.addEventListener("click",(()=>this.notify())),this.subscribers=[]}register(e){this.subscribers.push(e)}unregister(e){this.subscribers=this.subscribers.filter((t=>t!==e))}notify(){this.subscribers.forEach((e=>e.update(this)))}}t.LevelButton=o},9371:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LevelSwitcher=void 0;const s=n(9435),i=n(9776);n(188);const r=n(10),o=n(2945);class a extends r.BaseComponent{constructor(){super("div",["textbook__level-switcher"]);let e=Object.values(s.WordDifficultyGroup).sort();o.SessionSaver.getInstance().isActive||(e=e.filter((e=>+e<6))),this.subscribers=[],this.levelButtons=e.map((e=>{const t=new i.LevelButton(e);return t.register(this),this.element.append(t.element),t})),this.currentLevel=this.levelButtons[0],this.currentLevel.element.classList.add("select")}update(e){this.currentLevel.element.classList.remove("select"),this.currentLevel=e,this.currentLevel.element.classList.add("select"),this.notify()}register(e){this.subscribers.push(e)}unregister(e){this.subscribers=this.subscribers.filter((t=>t!==e))}notify(){this.subscribers.forEach((e=>e.update()))}getCurrentLevel(){return this.currentLevel.level}}t.LevelSwitcher=a},1097:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PageSwitcher=void 0;const s=n(10);n(4337);class i extends s.BaseComponent{constructor(e){super("div",["textbook__page-switcher"]),this.BUTTON_WIDTH=30,this.BUTTON_GAP=10,this.countPage=e,this.subscribers=[],this.pages=[],this.currentPage=0,this.checkWindowWidth(),this.sliderContainer=document.createElement("div"),this.sliderContainer.classList.add("container"),this.sliderWrapper=document.createElement("div"),this.sliderWrapper.classList.add("wrapper"),this.sliderWrapper.append(this.sliderContainer),this.beforeWrapper=document.createElement("div"),this.beforeWrapper.classList.add("before-wrapper"),this.afterWrapper=document.createElement("div"),this.afterWrapper.classList.add("after-wrapper"),this.initPageSwitcher()}register(e){this.subscribers.push(e)}unregister(e){this.subscribers=this.subscribers.filter((t=>t!==e))}notify(){this.subscribers.forEach((e=>e.update()))}getCurrentPage(){return this.currentPage}setCurrentPage(e){e<this.countPage&&(this.currentPage=e,this.switchSelectButtonStyle(),this.renderPagination())}initPageSwitcher(){const e=new s.BaseComponent("button",["textbook__page-button"]).element;e.innerHTML="&lt;&lt;",e.addEventListener("click",(()=>{this.currentPage&&(this.currentPage-=this.pagePerSlide,this.currentPage<0&&(this.currentPage=0),this.refresh())}));const t=new s.BaseComponent("button",["textbook__page-button"]).element;t.innerHTML="&lt;",t.addEventListener("click",(()=>{this.currentPage&&(this.currentPage-=1,this.refresh())}));const n=new s.BaseComponent("button",["textbook__page-button"]).element;n.innerHTML="&gt;",n.addEventListener("click",(()=>{this.currentPage<this.countPage-1&&(this.currentPage+=1,this.refresh())}));const i=new s.BaseComponent("button",["textbook__page-button"]).element;i.innerHTML="&gt;&gt;",i.addEventListener("click",(()=>{this.currentPage<this.countPage-1&&(this.currentPage+=this.currentPage+this.pagePerSlide<this.countPage-1?this.pagePerSlide:this.countPage-(1+this.currentPage),this.refresh())}));for(let e=0;e<this.countPage;e++){const t=new s.BaseComponent("button",["textbook__page-button"],`${e+1}`).element;t.addEventListener("click",(()=>{this.currentPage=e,this.refresh()})),this.pages.push(t)}this.element.append(e,t,this.pages[0],this.beforeWrapper,this.sliderWrapper,this.afterWrapper,this.pages[this.pages.length-1],n,i),this.sliderContainer.append(...this.pages.slice(2,this.pages.length-2)),this.refresh()}refresh(){this.notify(),this.switchSelectButtonStyle(),this.renderPagination()}renderPagination(){this.updateSliderWrapperWidth(),this.currentPage>2+Math.floor(this.pagePerSlide/2)?(this.beforeWrapper.innerHTML="",this.beforeWrapper.append(new s.BaseComponent("button",["textbook__page-button"],"...").element),this.afterWrapper.innerHTML="",this.currentPage>this.countPage-(4+Math.floor(this.pagePerSlide/2))?this.afterWrapper.append(this.pages[this.pages.length-2]):this.afterWrapper.append(new s.BaseComponent("button",["textbook__page-button"],"...").element)):(this.beforeWrapper.innerHTML="",this.beforeWrapper.append(this.pages[1]),this.afterWrapper.innerHTML="",this.afterWrapper.append(new s.BaseComponent("button",["textbook__page-button"],"...").element)),this.checkMoveSlider()}switchSelectButtonStyle(){this.pages.forEach(((e,t)=>{t===this.currentPage?e.classList.add("select"):e.classList.remove("select")}))}updateSliderWrapperWidth(){this.sliderWrapper.style.width=this.BUTTON_WIDTH*this.pagePerSlide+this.BUTTON_GAP*(this.pagePerSlide-1)+2*this.BUTTON_GAP+"px"}checkMoveSlider(){let e=this.currentPage-2-Math.floor(this.pagePerSlide/2);e<0&&(e=0),e>this.countPage-4-this.pagePerSlide&&(e=this.countPage-4-this.pagePerSlide),this.sliderContainer.style.left=this.BUTTON_GAP-(this.BUTTON_WIDTH+this.BUTTON_GAP)*e+"px"}checkWindowWidth(){switch(this.matchWith5SliderButton=window.matchMedia(`(max-width: ${Math.ceil(13*(this.BUTTON_WIDTH+this.BUTTON_GAP)/.8)}px)`),this.matchWith5SliderButton.addEventListener("change",(e=>{e.matches?this.pagePerSlide=5:this.pagePerSlide=7,this.renderPagination()})),this.matchWith3SliderButton=window.matchMedia(`(max-width: ${Math.ceil(11*(this.BUTTON_WIDTH+this.BUTTON_GAP)/.8)}px)`),this.matchWith3SliderButton.addEventListener("change",(e=>{e.matches?this.pagePerSlide=3:this.pagePerSlide=5,this.renderPagination()})),!0){case this.matchWith3SliderButton.matches:this.pagePerSlide=3;break;case this.matchWith5SliderButton.matches:this.pagePerSlide=5;break;default:this.pagePerSlide=7}}}t.PageSwitcher=i},1382:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function o(e){try{l(s.next(e))}catch(e){r(e)}}function a(e){try{l(s.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.proxyApi=void 0;const i=n(9435),r=n(3493),o=n(2404),a=n(5986),l=n(2945),d=n(9275);t.proxyApi=new class{constructor(){this.session=l.SessionSaver.getInstance()}getAUserWordById(e){return s(this,void 0,void 0,(function*(){return a.apiUsersWords.getAUserWordById(this.session.userId,e,this.session.token).then((e=>{var t;return e.statusCode===i.StatusCode.Success?null===(t=e.body)||void 0===t?void 0:t.optional:void 0}))}))}createAUserWord(e){return s(this,void 0,void 0,(function*(){return a.apiUsersWords.createAUserWord(this.session.userId,e,d.OPTION_DEFAULT,this.session.token).then((e=>{var t;return null===(t=e.body)||void 0===t?void 0:t.optional}))}))}updateAUserWord(e,t){return s(this,void 0,void 0,(function*(){return a.apiUsersWords.updateAUserWord(this.session.userId,e,{optional:t},this.session.token).then((e=>{var t;return null===(t=e.body)||void 0===t?void 0:t.optional}))}))}getAllUserAggregatedWords(e){return s(this,void 0,void 0,(function*(){return o.apiUsersAggregatedWords.getAllUserAggregatedWords(this.session.userId,"","3600",this.session.token,e).then((e=>e.body[0]))}))}getUser(){return s(this,void 0,void 0,(function*(){return r.apiUsers.getUser(this.session.userId,this.session.token).then((e=>(e.statusCode!==i.StatusCode.Success&&this.session.logout(),e)))}))}}},8150:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Textbook=void 0;const s=n(2365),i=n(9371),r=n(1097),o=n(6977),a=n(7690),l=n(9435),d=n(10),c=n(1382);n(3845);class h extends d.BaseComponent{constructor(){super("div",["textbook"]),this.levelSwitcher=new i.LevelSwitcher,this.levelSwitcher.register(this),this.wordList=new a.WordsList((()=>{this.checkStudies()})),this.wordPresenter=new o.WordPresenter,this.wordList.register(this.wordPresenter),this.pageSwitcher=new r.PageSwitcher(30),this.pageSwitcher.register(this);const e=new d.BaseComponent("div",["textbook__word-cascade"]).element;e.append(this.wordList.element,this.wordPresenter.element),this.element.append(new d.BaseComponent("div",["textbook__header"],"Учебник").element,this.levelSwitcher.element,e,this.pageSwitcher.element,this.getGameLinkContainer()),this.loadWords()}update(){this.loadWords()}checkStudies(){this.wordList.wordsArray.every((e=>e.userOptions&&(e.userOptions.isHard||e.userOptions.isStudied)))&&this.level!==l.WordDifficultyGroup.HW?this.element.classList.add("textbook__all-studied"):this.element.classList.remove("textbook__all-studied")}loadWords(){this.element.classList.remove(`level-${this.level}`);const e=this.levelSwitcher.getCurrentLevel();this.element.classList.add(`level-${e}`),this.wordPresenter.show(),this.level!==e&&this.pageSwitcher.setCurrentPage(0),this.level=e,+e<6?(this.linkToSprint.setAttribute("href",`${document.URL.split("#")[0]}#sprint-game/${this.level}/${this.pageSwitcher.getCurrentPage()}`),this.linkToAudiocall.setAttribute("href",`${document.URL.split("#")[0]}#audiocall-game/${this.level}/${this.pageSwitcher.getCurrentPage()}`),s.apiWords.getAChunkOfWords(this.level,this.pageSwitcher.getCurrentPage().toString()).then((e=>{e.statusCode===l.StatusCode.Success&&e.body&&(this.wordList.setWords(e.body),this.wordPresenter.hardUpdate=null)}))):"6"===e&&c.proxyApi.getAllUserAggregatedWords('{"$and":[{"userWord.optional.isHard":true}]}').then((e=>{e.totalCount.length?e.totalCount[0].count>0&&e.paginatedResults&&(this.wordList.setWords(e.paginatedResults),this.wordPresenter.hardUpdate=()=>{this.loadWords()}):(this.wordPresenter.hide(),this.wordList.drawEmpty())}))}getGameLinkContainer(){const e=document.createElement("div");e.classList.add("textbook__game-link-container");const t=document.createElement("div");t.classList.add("textbook__game-link-wrapper");const n=document.createElement("h2");n.classList.add("textbook__game-header"),n.textContent="Игры",this.linkToSprint=document.createElement("a"),this.linkToSprint.classList.add("textbook__game-link"),this.linkToAudiocall=document.createElement("a"),this.linkToAudiocall.classList.add("textbook__game-link");const s=document.createElement("p");s.classList.add("textbook__game-title"),s.textContent="Спринт";const i=document.createElement("p");i.classList.add("textbook__game-title"),i.textContent="Аудиовызов";const r=document.createElement("img");r.classList.add("textbook__game-img"),r.setAttribute("src","./assets/sprint.jpg"),r.setAttribute("alt","Icon Sprint Game");const o=document.createElement("img");return o.classList.add("textbook__game-img"),o.setAttribute("src","./assets/audiocall.jpg"),o.setAttribute("alt","Icon Audiocall Game"),this.linkToSprint.append(s,r),this.linkToAudiocall.append(i,o),t.append(this.linkToSprint,this.linkToAudiocall),e.append(n,t),e}}t.Textbook=h},6977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WordPresenter=void 0;const s=n(9435),i=n(2945),r=n(5188),o=n(10),a=n(1382);n(7275);class l extends o.BaseComponent{constructor(){super("div",["word-presenter"]),this.player=new r.AudioPlayer}hide(){this.element.classList.add("word-presenter__hide")}show(){this.element.classList.remove("word-presenter__hide")}update(e){const t=e.currentCheckWord.word;this.player.addInPlaylist(this.makeURL(t.audio),this.makeURL(t.audioMeaning),this.makeURL(t.audioExample));const n=new o.BaseComponent("img",["word-presenter__image"]).element;n.setAttribute("src",`${s.BASE_URL}/${t.image}`);const r=new o.BaseComponent("div",["word-presenter__description"]).element,l=new o.BaseComponent("p",["word-presenter__word"]).element;l.innerHTML=t.word;const d=new o.BaseComponent("p",["word-presenter__translate"]).element;d.innerHTML=t.wordTranslate;const c=new o.BaseComponent("div",["word-presenter__transcription-container"]).element,h=new o.BaseComponent("p",["word-presenter__transcription"]).element;h.innerHTML=t.transcription;const u=document.createElement("button");u.classList.add("word-presenter__audio-button"),this.player.setControlElement(u),c.append(h,u);const p=i.SessionSaver.getInstance(),m=new o.BaseComponent("div",["word-presenter__manage-button-container"]).element;p.isActive&&a.proxyApi.getAUserWordById(t.id).then((n=>{const s=document.createElement("button");s.classList.add("word-presenter__button-hard");const i=document.createElement("button");i.classList.add("word-presenter__button-studied"),n?n.isHard?(s.addEventListener("click",(()=>{n.isHard=!1,a.proxyApi.updateAUserWord(t.id,n).then((()=>{this.hardUpdate&&this.hardUpdate(),e.currentCheckWord.update(),this.update(e)}))})),s.textContent="Убрать из тяжелых",i.addEventListener("click",(()=>{n.isHard=!1,n.isStudied=!0,a.proxyApi.updateAUserWord(t.id,n).then((()=>{e.currentCheckWord.update(),this.update(e)}))})),i.textContent="Добавить в изученные"):n.isStudied?(i.addEventListener("click",(()=>{n.isHard=!1,n.isStudied=!1,a.proxyApi.updateAUserWord(t.id,n).then((()=>{e.currentCheckWord.update(),this.update(e)}))})),i.textContent="Убрать из изученных",s.addEventListener("click",(()=>{n.isHard=!0,n.isStudied=!1,a.proxyApi.updateAUserWord(t.id,n).then((()=>{e.currentCheckWord.update(),this.update(e)}))})),s.textContent="Добавить в тяжелые"):(s.addEventListener("click",(()=>{n.isHard=!0,n.isStudied=!1,a.proxyApi.updateAUserWord(t.id,n).then((()=>{e.currentCheckWord.update(),this.update(e)}))})),s.textContent="Добавить в тяжелые",i.addEventListener("click",(()=>{n.isHard=!1,n.isStudied=!0,a.proxyApi.updateAUserWord(t.id,n).then((()=>{e.currentCheckWord.update(),this.update(e)}))})),i.textContent="Добавить в изученные"):(s.addEventListener("click",(()=>{a.proxyApi.createAUserWord(t.id).then((n=>{n.isHard=!0,a.proxyApi.updateAUserWord(t.id,n).then((()=>{e.currentCheckWord.update(),this.update(e)}))}))})),s.textContent="Добавить в тяжелые",i.addEventListener("click",(()=>{a.proxyApi.createAUserWord(t.id).then((n=>{n.isHard=!1,n.isStudied=!0,a.proxyApi.updateAUserWord(t.id,n).then((()=>{e.currentCheckWord.update(),this.update(e)}))}))})),i.textContent="Добавить в изученные"),m.append(s,i)}));const g=new o.BaseComponent("p",["word-presenter__meaning"]).element;g.innerHTML=t.textMeaning;const v=new o.BaseComponent("p",["word-presenter__meaning-translate"]).element;v.innerHTML=t.textMeaningTranslate;const w=new o.BaseComponent("p",["word-presenter__example"]).element;w.innerHTML=t.textExample;const f=new o.BaseComponent("p",["word-presenter__example-translate"]).element;f.innerHTML=t.textExampleTranslate,r.append(l,d,c,m,new o.BaseComponent("p",["word-presenter__subheader"],"Значение").element,g,v,new o.BaseComponent("p",["word-presenter__subheader"],"Пример").element,w,f),this.element.innerHTML="",this.element.append(n,r)}makeURL(e){return`${s.BASE_URL}/${e}`}}t.WordPresenter=l},9700:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Word=void 0;const s=n(2945),i=n(10),r=n(1382);n(3685);class o extends i.BaseComponent{constructor(e,t){super("div",["word"]),e._id&&(e.id=e._id),this.checkStudies=t,this.word=e,this.userOptions=null,this.element.append(new i.BaseComponent("p",["word__text"],e.word).element,new i.BaseComponent("p",["word__translate"],e.wordTranslate).element),this.update()}update(){s.SessionSaver.getInstance().isActive&&r.proxyApi.getAUserWordById(this.word.id).then((e=>{e&&(this.userOptions=e,this.userOptions.isHard?this.element.classList.add("word__difficulty-hard"):this.element.classList.remove("word__difficulty-hard"),this.userOptions.isStudied?this.element.classList.add("word__difficulty-studied"):this.element.classList.remove("word__difficulty-studied")),this.checkStudies()}))}}t.Word=o},7690:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WordsList=void 0;const s=n(10),i=n(9700);n(667);class r extends s.BaseComponent{constructor(e){super("div",["textbook__words-list"]),this.subscribers=[],this.checkStudies=e}register(e){this.subscribers.push(e)}unregister(e){this.subscribers=this.subscribers.filter((t=>t!==e))}notify(){this.subscribers.forEach((e=>e.update(this)))}setWords(e){this.wordsArray=e.map((e=>new i.Word(e,(()=>this.checkStudies())))),this.listRefresh()}listRefresh(){this.element.innerHTML="",this.wordsArray.forEach((e=>{e.element.addEventListener("click",(()=>{this.currentCheckWord.element.classList.remove("select"),this.currentCheckWord=e,this.currentCheckWord.element.classList.add("select"),this.notify()})),this.element.append(e.element)})),this.wordsArray.length&&(this.currentCheckWord=this.wordsArray[0],this.currentCheckWord.element.classList.add("select"),this.notify())}drawEmpty(){this.element.innerHTML="";const e=new s.BaseComponent("div",["textbook__empty_message"]).element;e.innerHTML="На  данный момент в данной категории ничего нет.\n    <br>Продолжайте обучение...",this.element.append(e)}}t.WordsList=r},8483:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||s(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(8150),t)},9275:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OPTION_DEFAULT=void 0,t.OPTION_DEFAULT={optional:{isHard:!1,isStudied:!1}}},7024:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TextbookDifficulty=t.TEXTBOOK_LEVEL_DESCRIPTION=void 0,t.TEXTBOOK_LEVEL_DESCRIPTION=["Легко","Легко+","Средне","Средне+","Трудно","Трудно+","Сложные слова"],(n=t.TextbookDifficulty||(t.TextbookDifficulty={})).A1="0",n.A2="1",n.B1="2",n.B2="3",n.C1="4",n.C2="5",n.HW="6"}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(8503),n(5373),n(6887);const e=n(2945),t=new(n(1568).App);window.onload=()=>{e.SessionSaver.getInstance(),t.run()}})()})();